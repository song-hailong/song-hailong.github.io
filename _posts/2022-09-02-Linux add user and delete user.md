---
layout: post
title: "Linux æ–°å»ºç”¨æˆ·ã€åˆ é™¤ç”¨æˆ·"
date: 2022-09-02
tag: Linux
---

> å‚è€ƒæ–‡ç« ï¼š
[Linux_åˆ›å»ºæ–°ç”¨æˆ·](https://zhuanlan.zhihu.com/p/413577022)
[linuxåˆ›å»ºæ–°ç”¨æˆ·](https://blog.csdn.net/u9king/article/details/116261122)


ğŸ“Œ å‰è¨€ï¼šæœ€è¿‘ç™½å«–äº†ä¸€ä¸ªæœˆçš„é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œé»˜è®¤åªæœ‰ root ç”¨æˆ·ï¼Œæ‰€ä»¥æƒ³æ–°å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·ä½¿ç”¨ã€‚


# 1. åˆ›å»ºæ–°ç”¨æˆ· `abc`

åœ¨rootè´¦æˆ·ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»º `abc` ç”¨æˆ·ã€‚

```bash
useradd -m abc  #åˆ›å»ºåä¸ºabcçš„æ–°ç”¨æˆ·ï¼Œå¹¶åœ¨/homeç›®å½•ä¸‹åˆ›å»ºç”¨æˆ·æ–‡ä»¶å¤¹
passwd abc  #ç»™æ–°ç”¨æˆ·è®¾ç½®ç™»å½•å¯†ç ï¼ˆè¾“å…¥å¯†ç æ—¶çœ‹ä¸åˆ°çš„ï¼Œç›´æ¥è¾“å…¥å³å¯ï¼‰
usermod -s /bin/bash abc  #ç¡®ä¿åˆ›å»ºæ–°ç”¨æˆ·ä¹Ÿæ˜¯ä½¿ç”¨çš„bashè„šæœ¬
```

<img src="https://songhailong-1257323743.cos.ap-chengdu.myqcloud.com/Untitled.png" alt="Untitled" style="zoom:50%;" />

æˆ–è€…érootè´¦å·ä¸‹ï¼Œåœ¨æ¯æ¡å‘½ä»¤å‰åŠ  `sudo` ï¼Œæ¯æ¬¡æ‰§è¡Œæ—¶éœ€è¾“å…¥rootè´¦å·å¯†ç ï¼Œå¦‚ä¸‹

```bash
sudo useradd -m abc  #åˆ›å»ºåä¸ºabcçš„æ–°ç”¨æˆ·ï¼Œå¹¶åœ¨/homeç›®å½•ä¸‹åˆ›å»ºç”¨æˆ·æ–‡ä»¶å¤¹
sudo passwd abc  #ç»™æ–°ç”¨æˆ·è®¾ç½®ç™»å½•å¯†ç ï¼ˆè¾“å…¥å¯†ç æ—¶çœ‹ä¸åˆ°çš„ï¼Œç›´æ¥è¾“å…¥å³å¯ï¼‰
sudo usermod -s /bin/bash abc  #ç¡®ä¿åˆ›å»ºæ–°ç”¨æˆ·ä¹Ÿæ˜¯ä½¿ç”¨çš„bashè„šæœ¬
```

# 2. å¯èƒ½å‡ºç°çš„é”™è¯¯

ç™»å½•æ–°å»ºçš„ç”¨æˆ·æ—¶ï¼Œå¯èƒ½ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ï¼š

```bash
/usr/bin/xauth:  file /home/abc/.Xauthority does not exist
```

- **é”™è¯¯åŸå› ï¼š**
  
    æ·»åŠ ç”¨æˆ·æ—¶æ²¡æœ‰æˆæƒå¯¹åº”çš„ç›®å½•ï¼Œä»…ä»…æ‰§è¡Œäº†useradd userè€Œæ²¡æœ‰æˆæƒå¯¹åº”çš„å®¶ç›®å½•
    
- **è§£å†³åŠæ³•ï¼š**
  
    ä½¿ç”¨ root æƒé™æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ”¹å˜æŒ‡å®šabcç”¨æˆ·ç›®å½•åŠå…¶å†…æ‰€æœ‰å­æ–‡ä»¶çš„æ‰€å±ä¸»ä¸æ‰€å±ç»„
    
    ```bash
    chown abc:abc -R /home/abc
    ```
    
    ![Untitled](https://songhailong-1257323743.cos.ap-chengdu.myqcloud.com/Untitled%201.png)
    

å†æ¬¡ç™»å½• abc ç”¨æˆ·ï¼Œå°±ä¸ä¼šå†æŠ¥é”™äº†ã€‚

> å‚è€ƒï¼š[Lunixä¸‹å»ºç«‹æ–°ç”¨æˆ·-.Xauthority does not exist-ä¸æ˜¾ç¤ºç”¨æˆ·åå’Œè·¯å¾„](http://t.csdn.cn/ychfQ)
> 

# 3. ç»™ç”¨æˆ·æ·»åŠ  sudo æƒé™ï¼ˆä¸éœ€è¦å¯ä¸è®¾ç½®ï¼‰

ä½¿ç”¨ root æƒé™æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
chmod u+w /etc/sudoers  #ç»™sudoersæ–‡ä»¶æ·»åŠ å¯å†™çš„æƒé™
vim sudoers  #ä½¿ç”¨vimè¿›å…¥ç¼–è¾‘è¯¥æ–‡ä»¶ï¼Œç»™æ–°åˆ›çš„ç”¨æˆ·åŠ ä¸Šæƒé™ï¼Œä¿å­˜é€€å‡º
```

æ‰¾åˆ° `root` ç”¨æˆ·è¡Œï¼ŒæŒ‰ `o` é”®ï¼Œåœ¨ä¸‹æ–¹æ’å…¥ä¸€è¡Œï¼Œè¾“å…¥

```bash
abc     ALL=(ALL:ALL) ALL
```

å¦‚ä¸‹å›¾æ‰€ç¤º

![Untitled](https://songhailong-1257323743.cos.ap-chengdu.myqcloud.com/Untitled%202.png)

è¾“å…¥å®Œæˆåï¼Œå…ˆæŒ‰ `ESC` é”®ï¼Œå†è¾“å…¥ `:wq` åæŒ‰ å›è½¦é”®ï¼Œä¿å­˜å¹¶é€€å‡ºã€‚

![Untitled](https://songhailong-1257323743.cos.ap-chengdu.myqcloud.com/Untitled%203.png)

å†æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å–æ¶ˆè¯¥æ–‡ä»¶çš„æƒé™

```bash
chmod u-w sudoers  #å†å°†è¯¥æ–‡ä»¶çš„æƒé™å…³æ‰
```

è‡³æ­¤ï¼Œè¯¥ç”¨æˆ·æ‹¥æœ‰ `sudo` æƒé™ã€‚

# 4. åˆ é™¤ç”¨æˆ·

åœ¨ root æƒé™ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
userdel -r abc  #åœ¨rootæƒé™ä¸‹å°†æµ‹è¯•ç”¨æˆ·åˆ æ‰ï¼Œå¹¶åˆ é™¤ç”¨æˆ·æ–‡ä»¶å¤¹ï¼Œç„¶åé€€å‡ºæµ‹è¯•ç”¨æˆ·çš„ç™»é™†å³å¯
```

å¦‚ä¸‹å›¾æ‰€ç¤º

![uTools_1662125756649.png](https://songhailong-1257323743.cos.ap-chengdu.myqcloud.com/uTools_1662125756649.png)

åœ¨é€šè¿‡ä»¥ä¸‹æŒ‡ä»¤æŸ¥è¯¢è¯¥ç”¨æˆ·æ—¶ï¼Œæç¤ºæ²¡æœ‰æ­¤ç”¨æˆ·

```bash
root@xxxxxx:~# id -u abc
id: â€˜abcâ€™: no such user
```

# ç»“å°¾

æ¨èä¸€ä¸ªlinuxæ•™ç¨‹ï¼š[http://c.biancheng.net/view/844.html](http://c.biancheng.net/view/844.html)